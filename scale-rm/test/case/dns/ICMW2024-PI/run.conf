#####
#
# SCALE-RM run configulation
#
#####

&PARAM_PRC
 PRC_NUM_X = 16,
 PRC_NUM_Y = 8,
 PRC_PERIODIC_X  = .false.,
 PRC_PERIODIC_Y  = .false.,
/

&PARAM_INDEX
 KMAX =  16,
 IMAX =  2,
 JMAX =  4,
 IHALO =  2,
 JHALO =  2,
/

&PARAM_GRID
 DZ        = 6.25D-2,
 DX        = 6.25D-2,
 DY        = 6.25D-2,
/

&PARAM_TIME
 TIME_STARTDATE             = 0000, 1, 1, 0, 0, 0,
 TIME_STARTMS               = 0.D0,
 TIME_DURATION              = 5400.D0,
 TIME_DURATION_UNIT         = "SEC",
 TIME_DT                    = 4.0D-2,
 TIME_DT_UNIT               = "SEC",
 TIME_DT_ATMOS_DYN          = 1.0D-4,
 TIME_DT_ATMOS_DYN_UNIT     = "SEC",
 TIME_DT_ATMOS_PHY_MP       = 4.0D-2,
 TIME_DT_ATMOS_PHY_MP_UNIT  = "SEC",
 TIME_DT_ATMOS_PHY_TB       = 4.0D-2,
 TIME_DT_ATMOS_PHY_TB_UNIT  = "SEC",
/

&PARAM_RESTART
 RESTART_IN_BASENAME = "init_00000101-000000.000",
 RESTART_OUTPUT      = .false.,
/

&PARAM_ATMOS_PHY_MP_VARS
 ATMOS_PHY_MP_USE_TENDENCY = .false.,
/

&PARAM_STATISTICS
 STATISTICS_checktotal     = .false.,
 STATISTICS_use_globalcomm = .false.,
/

&PARAM_ATMOS
 ATMOS_DYN_TYPE    = "HEVE",
 ATMOS_PHY_MP_TYPE = "SDM",
 ATMOS_PHY_TB_TYPE = "SMAGORINSKY",
 ATMOS_PHY_SF_TYPE = "NONE",
/

&PARAM_ATMOS_VARS
 ATMOS_VARS_CHECKRANGE = .false.,
/

&PARAM_ATMOS_REFSTATE
 ATMOS_REFSTATE_TYPE         = "INIT",
 ATMOS_REFSTATE_UPDATE_FLAG  = .false.,
/

&PARAM_ATMOS_DYN
 ATMOS_DYN_TINTEG_SHORT_TYPE          = "RK4",
 ATMOS_DYN_TINTEG_TRACER_TYPE         = "RK3WS2002",
 ATMOS_DYN_FVM_FLUX_TYPE              = "CD4",
 ATMOS_DYN_FVM_FLUX_TRACER_TYPE       = "UD3KOREN1993",
 ATMOS_DYN_FLAG_FCT_TRACER            = .false.,
 ATMOS_DYN_NUMERICAL_DIFF_COEF        = 1.D-4,
 ATMOS_DYN_NUMERICAL_DIFF_COEF_TRACER = 0.D0,
/

&PARAM_USER
 USER_do = .true.,
 TEMP_BOTTOM = 277.15, ! bottom wall temperature [K]
 TEMP_TOP    = 257.15, ! top wall temperature [K]
 TEMP_SIDE   = 261.15, ! side wall temperature [K]
 RHICE_SIDE  = 0.5,    ! side wall relative humidity over ice []
/

&PARAM_ATMOS_PHY_MP
 docondensation   = .true.,
 doautoconversion = .false.,
 doprecipitation  = .true.,
/

#  for the 1st run do not use SD_IN_BASENAME
#  from the second run do use SD_IN_BASENAME 
&PARAM_ATMOS_PHY_MP_SDM
 RANDOM_IN_BASENAME = "random_number_init",
 RANDOM_OUT_BASENAME = "random_number_restart",
 SD_OUT_BASENAME = "superdroplet_restart",
 domovement       = .true.,
 sdm_cold         = .true., ! .false.: warm sdm, .true.: cold sdm
 domeltfreeze     = .true., ! works only when sdm_cold==.true.
 dosublimation    = .true., ! works only when sdm_cold==.true.
 sdm_rqc2qr       = 40.d-6,
 sdm_dtcmph       = 4.0d-2, 4.0d-2, 4.0d-2, 4.0d-2, 4.0d-2,
                  ! condensation, coalescence, advection, melting/freezing [coldsdm only], sublimation/deposition [coldsdm only]
 sdm_rdnc         = 0.d0,
 sdm_sdnmlvol     = 2.4414062500000D-4,
 sdm_inisdnc      = 100.0d0,
 sdm_zlower       =    0.d0,
 sdm_zupper       =    1.d0,
 sdm_aslset       = 66,     ! if abs(sdm_aslset)>=10, aerosol nucleation occurs. turn this off for now
 sdm_fctr2multi   = 1.0d0,  ! Factor to increase the initial number density of soluble aerosol particles. This will not be applied to insoluble aersol.
 sdm_aslmw        = -999.d0,
 sdm_extbuf       = 400,
 sdm_aslfmdt      = 0.04d0,         ! aerosol and ice formation time step [s] 
 sdm_aslfmsdnc    = 0.006666666667  ! sd injection rate for aerosol and ice [/nmlvol/aslfmdt]
 sdm_aslfmrate    = 1.6666667d5, ! aerosol formation rate [1/(m^3 s)]
 sdm_aslfm_starttime = 1800.0d0,    ! aerosol formation start time [s]
 sdm_icefmrate    = 8.3333333d3, ! aerosol formation rate [1/(m^3 s)]
 sdm_icefm_starttime = 3600.0d0,    ! aerosol formation start time [s]
 sdm_nadjvar      = 0,  ! Control flag of adjustment super-droplet number in each grid
                        ! 3:adjust number of droplet by adding and removal, 1:adjust number of droplet by adding
                        ! 2:adjust number of droplet by removal 0:No adjust number of droplet 
			! use 0 and turn this function off for now
 sdm_dmpvar  = 200,    ! Control flag to output Super Droplets, integer
                       ! 1st digit (10^0) corresponds to text output
                       ! 2nd digit (10^1) corresponds to binary output (all particles)
                       ! 3rd digit (10^2) corresponds to binary output (only activated droplets) 
                       ! 0: off, 1: output each timestep separately, 2: output with history format
 sdm_dmpitva  = 30.d0, ! Time interval of text output, real(RP) [s]
 sdm_dmpnskip = 1,     ! Base skip to store super droplets in text format, integer
 sdm_dmpitvb  = 30.d0,  ! Time interval of binary output of all droplets, real(RP) [s]
 sdm_dmpitvl  = 30.d0,  ! Time interval of binary output of large droplets, real(RP) [s]
 sdm_dmpsdsiz = 0.d0,  ! Threshold radius to store large super droplets in binary format, real(RP) [m]
/

&PARAM_HISTORY
 HISTORY_DEFAULT_BASENAME  = "history",
 HISTORY_DEFAULT_TINTERVAL = 30.0D0,
 HISTORY_DEFAULT_TUNIT     = "SEC",
 HISTORY_DEFAULT_TAVERAGE  = .false.,
 HISTORY_DEFAULT_DATATYPE  = "REAL4",
 HISTORY_OUTPUT_STEP0      = .true.,
/

&HISTITEM item='DENS'    /
&HISTITEM item='MOMZ'    /
&HISTITEM item='MOMX'    /
&HISTITEM item='MOMY'    /
&HISTITEM item='PRES'   /
&HISTITEM item='PT'   /
&HISTITEM item='RH'   /
&HISTITEM item='RHI'   /
&HISTITEM item='T'   /

&HISTITEM item='TKE_SMG'   /

&HISTITEM item='QV'   /
&HISTITEM item='QC_sd',  /
&HISTITEM item='QR_sd',  /
&HISTITEM item='QI_sd',  /
&HISTITEM item='QS_sd',  /
&HISTITEM item='QG_sd',  /
&HISTITEM item='QHYD_sd' /

&HISTITEM item='SNC'   /
&HISTITEM item='NC',    datatype="REAL8"   /
&HISTITEM item='DMOM1', datatype="REAL8"   /
&HISTITEM item='DMOM2', datatype="REAL8"   /
&HISTITEM item='DMOM3', datatype="REAL8"   /
&HISTITEM item='NASL',  datatype="REAL8"   /
&HISTITEM item='AMOM1', datatype="REAL8"   /
&HISTITEM item='AMOM2', datatype="REAL8"   /
&HISTITEM item='AMOM3', datatype="REAL8"   /
&HISTITEM item='NI',    datatype="REAL8"   /
&HISTITEM item='IMOM1', datatype="REAL8"   /
&HISTITEM item='IMOM2', datatype="REAL8"   /
&HISTITEM item='IMOM3', datatype="REAL8"   /

&HISTITEM item='SFLX_B_SH', datatype="REAL8"   /
&HISTITEM item='SFLX_B_QV', datatype="REAL8"   /
&HISTITEM item='SFLX_T_SH', datatype="REAL8"   /
&HISTITEM item='SFLX_T_QV', datatype="REAL8"   /
&HISTITEM item='SFLX_W_SH', datatype="REAL8"   /
&HISTITEM item='SFLX_W_QV', datatype="REAL8"   /
&HISTITEM item='SFLX_E_SH', datatype="REAL8"   /
&HISTITEM item='SFLX_E_QV', datatype="REAL8"   /
&HISTITEM item='SFLX_S_SH', datatype="REAL8"   /
&HISTITEM item='SFLX_S_QV', datatype="REAL8"   /
&HISTITEM item='SFLX_N_SH', datatype="REAL8"   /
&HISTITEM item='SFLX_N_QV', datatype="REAL8"   /

&HISTITEM item="PREC_ACC_sd" /
&HISTITEM item="PREC", taverage=.true. /

&PARAM_MONITOR
 MONITOR_STEP_INTERVAL = 300,
/

&MONITITEM item='QDRY' /
&MONITITEM item='QTOT' /
&MONITITEM item='EVAP' /
&MONITITEM item='PRCP' /

&MONITITEM item='ENGT' /
&MONITITEM item='ENGP' /
&MONITITEM item='ENGK' /
&MONITITEM item='ENGI' /

&MONITITEM item='QV'   /
&MONITITEM item='SNC'   /
